/*!
 * VERSION: 0.3.0
 * DATE: 2015-11-28
 * GIT:https://github.com/shrekshrek/jstween
 *
 * @author: Shrek.wang, shrekshrek@gmail.com
 **/

!function(t){var n="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;"function"==typeof define&&define.amd?define(["exports"],function(i){n.JT=t(n,i)}):"undefined"!=typeof exports?t(n,exports):n.JT=t(n,{})}(function(t,n){function i(t,n){for(var i in n)t[i]=n[i]}function e(t,n){if("function"==typeof t)n.call(t,0,t);else if(void 0===t.length)n.call(t,0,t);else for(var i=0;i<t.length;i++)n.call(t[i],i,t[i])}function a(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function r(t){return t.replace(/\b(\w)|\s(\w)/g,function(t){return t.toUpperCase()})}function o(t){return t?T+r(t):T}function s(t){if(!t)throw"target is undefined, can't tween!!!";return"string"==typeof t?"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t):t}function u(t,n){return void 0!==t.style[n]?n:(n=o(n),void 0!==t.style[n]?n:null)}function l(t,n){if("string"==typeof n){var i=n.substr(0,2),e=parseFloat(n.substr(2));switch(i){case"+=":n=t+e;break;case"-=":n=t-e}}return n}function h(t,n){switch(t){case"opacity":case"fontWeight":case"lineHeight":case"zoom":return n;default:return"number"==typeof n?Math.round(n)+"px":n}}function f(t,n){if(document.defaultView&&document.defaultView.getComputedStyle){var i=a(n),e=document.defaultView.getComputedStyle(t,"");return e&&e.getPropertyValue(i)}return t.currentStyle?t.currentStyle[n]:null}function c(t,n){for(var i in n)void 0!=t.style[i]&&(t.style[i]=h(i,n[i]))}function p(t){return"object"==typeof t&&1===t.nodeType}function d(){R=!0;var t,n,i=O.length,e=b.length;if(0===i&&0===e)return void(R=!1);var a=E();for(t=i-1;t>=0;t--)if(O[t]&&!O[t]._update(a)){var r=O.splice(t,1)[0];r.onUpdate&&r.onUpdate.apply(r,r.onUpdateParams),r.onEnd&&r.onEnd.apply(r,r.onEndParams),r.target=null}for(n=e-1;n>=0;n--)if(b[n]&&!b[n]._update(a)){var o=b.splice(n,1)[0];o.onEnd&&o.onEnd.apply(o,o.onEndParams)}I(d)}function m(){this.initialize.apply(this,arguments)}function v(t,n){var i=s(t),a=O.length;e(i,function(t,i){for(var e=a-1;e>=0;e--){var r=O[e];r.target===i&&r[n]()}})}function y(t){for(var n=O.length,i=n-1;i>=0;i--){var e=O[i];e[t]()}}function g(){this.initialize.apply(this,arguments)}function P(t,n){var i=t,a=b.length;e(i,function(t,i){for(var e=a-1;e>=0;e--){var r=b[e];r.onEnd===i&&r[n]()}})}function M(t){for(var n=b.length,i=n-1;i>=0;i--){var e=b[i];e[t]()}}var w=Date.now(),E=function(){return Date.now()-w},T="";!function(){var t=document.createElement("div"),n=["Webkit","Moz","Ms","O"];for(var i in n)if(n[i]+"Transform"in t.style){T=n[i];break}}();var I=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,O=[],R=!1;i(m.prototype,{initialize:function(t,i,e,a,r){this.fromVars=e,this.toVars=a,this.target=t,this.duration=1e3*Math.max(i,0),this.ease=a.ease||n.Linear.None,this.delay=1e3*Math.max(a.delay||0,0),this.yoyo=a.yoyo||!1,this.repeat=this.curRepeat=Math.floor(a.repeat||0),this.repeatDelay=1e3*Math.max(a.repeatDelay||0,0),this.onStart=a.onStart||null,this.onStartParams=a.onStartParams||[],this.onRepeat=a.onRepeat||null,this.onRepeatParams=a.onRepeatParams||[],this.onEnd=a.onEnd||null,this.onEndParams=a.onEndParams||[],this.onUpdate=a.onUpdate||null,this.onUpdateParams=a.onUpdateParams||[],this.isPlaying=a.isPlaying||!0,this.isReverse=!1,this.isDom=r,this.curTime=0,this.lastTime=E(),this.isStart=!1,this.startTime=this.delay,this.endTime=this.startTime+this.repeatDelay+this.duration,O.unshift(this),R?this._update(this.lastTime):d()},_update:function(t){var n=t-this.lastTime;if(this.lastTime=t,!this.isPlaying)return!0;if(this.curTime+=n,this.curTime<this.startTime)return!0;if(this.isStart||(this.isStart=!0,this.onStart&&this.onStart.apply(this,this.onStartParams)),this.curTime<this.startTime+this.repeatDelay)return!0;if(this.curTime<this.endTime)this._updateProp(),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams);else{if(0==this.curRepeat)return this._updateProp(),!1;this.yoyo&&(this.isReverse=!this.isReverse),0==this.repeatDelay?(this.curTime=this.curTime-this.duration-this.repeatDelay,this._updateProp()):(this._updateProp(),this.curTime=this.curTime-this.duration-this.repeatDelay),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams),this.onRepeat&&this.onRepeat.apply(this,this.onRepeatParams),this.curRepeat>0&&this.curRepeat--}return!0},_updateProp:function(){var t=0==this.duration?1:(this.curTime-this.startTime-this.repeatDelay)/this.duration;t=Math.max(0,Math.min(1,t)),this.isReverse&&(t=1-t);var n=this.ease(t);for(var i in this.fromVars){var e=this.fromVars[i],a=this.toVars[i]||0,r=e+(a-e)*n;r=Math.round(100*r)/100,this.isDom?this.target.style[i]=h(i,r):this.target[i]=r}},play:function(){this.target&&(this.isPlaying=!0)},pause:function(){this.target&&(this.isPlaying=!1)},destroy:function(t){if(this.target){var n=O.indexOf(this);if(-1!==n){var i=O.splice(n,1)[0];t&&i.onEnd&&i.onEnd.apply(i,i.onEndParams),this.target=null}}}}),i(n,{get:function(t,n){var i=s(t);if(void 0!==i.length&&(i=i[0]),p(i)){var e=u(i,n);return e?f(i,e):null}return i[n]},set:function(t,n){var i=s(t);e(i,function(t,i){if(p(i)){var e={};for(var a in n){var r=u(i,a);r&&(e[r]=h(r,l(f(i,r),n[a])))}c(i,e)}else for(var a in n)i[a]=l(i[a],n[a])})},fromTo:function(t,n,i,a){var r=s(t),o=[];return e(r,function(t,e){var r={},s={},u=p(e);for(var h in a)if(u?void 0!==e.style[h]:void 0!==e[h]){var c=u?parseFloat(f(e,h)):e[h];r[h]=l(c,i[h]),s[h]=l(c,a[h])}else s[h]=a[h];var d=new m(e,n,r,s,u);o.push(d)}),1==o.length?o[0]:o},from:function(t,n,i){var a=s(t),r=[];return e(a,function(t,e){var a={},o={},s=p(e);for(var u in i)if(s?void 0!==e.style[u]:void 0!==e[u]){var h=s?parseFloat(f(e,u)):e[u];o[u]=h,a[u]=l(h,i[u])}else o[u]=i[u];var c=new m(e,n,a,o,s);r.push(c)}),1==r.length?r[0]:r},to:function(t,n,i){var a=s(t),r=[];return e(a,function(t,e){var a={},o={},s=p(e);for(var u in i)if(s?void 0!==e.style[u]:void 0!==e[u]){var h=s?parseFloat(f(e,u)):e[u];a[u]=h,o[u]=l(h,i[u])}else o[u]=i[u];var c=new m(e,n,a,o,s);r.push(c)}),1==r.length?r[0]:r},kill:function(t,n){var i=s(t);e(i,function(t,i){for(var e=O.length,a=e-1;a>=0;a--){var r=O[a];r.target===i&&(O.splice(a,1),n&&r.onEnd&&r.onEnd.apply(r,r.onEndParams),r.target=null)}})},killAll:function(t){if(!t)return void(O=[]);for(var n=O.length,i=n-1;i>=0;i--){var e=O.splice(i,1);t&&e.onEnd&&e.onEnd.apply(e,e.onEndParams),e.target=null}},play:function(t){v(t,"play")},playAll:function(){y("play")},pause:function(t){v(t,"pause")},pauseAll:function(){y("pause")}});var b=[];return i(g.prototype,{initialize:function(t,n,i,e){this.delay=1e3*t,this.onEnd=n||null,this.onEndParams=i||[],this.curTime=0,this.lastTime=E(),this.endTime=this.delay,this.isPlaying=e||!0,b.unshift(this),R?this._update(this.lastTime):d()},_update:function(t){var n=t-this.lastTime;return this.lastTime=t,this.isPlaying?(this.curTime+=n,this.curTime<this.endTime?!0:!1):!0},play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},destroy:function(t){var n=b.indexOf(this);if(-1!==n){var i=b.splice(n,1)[0];t&&i.onEnd&&i.onEnd.apply(i,i.onEndParams)}}}),i(n,{call:function(t,n,i){return new g(t,n,i)},killCall:function(t,n){var i=t,a=b.length;e(i,function(t,i){for(var e=a-1;e>=0;e--){var r=b[e];r.onEnd===i&&(b.splice(e,1),n&&r.onEnd&&r.onEnd.apply(r,r.onEndParams))}})},killAllCalls:function(t){if(!t)return void(b=[]);for(var n=b.length,i=n-1;i>=0;i--){var e=b.splice(i,1);t&&e.onEnd&&e.onEnd.apply(e,e.onEndParams)}},playCall:function(t){P(t,"play")},playAllCalls:function(){M("play")},pauseCall:function(t){P(t,"pause")},pauseAllCalls:function(){M("pause")}}),i(n,{Linear:{None:function(t){return t}},Quad:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quart:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quint:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sine:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Expo:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circ:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var n,i=.1,e=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,n=e/4):n=e*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/e)))},Out:function(t){var n,i=.1,e=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,n=e/4):n=e*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin(2*(t-n)*Math.PI/e)+1)},InOut:function(t){var n,i=.1,e=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,n=e/4):n=e*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/e):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-n)*Math.PI/e)*.5+1)}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?.5*t*t*((n+1)*t-n):.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-n.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*n.Bounce.In(2*t):.5*n.Bounce.Out(2*t-1)+.5}}}),n.now=E,n});
